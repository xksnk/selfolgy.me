services:
  selfology-enterprise:
    build:
      context: .
      dockerfile: Dockerfile.test
    container_name: selfology-enterprise
    environment:
      - TELEGRAM_BOT_TOKEN=8197893707:AAEbGC7r_4GGWXvgah-q-mLw5pp7YIxhK9g
      - DB_HOST=n8n-postgres
      - DB_PORT=5432
      - DB_USER=n8n
      - DB_PASSWORD=sS67wM+1zMBRFHAW4kj9HwFl5J6+veo7Nirx0/I+oiU=
      - DB_NAME=n8n
      # Enterprise monitoring config
      - MONITORING_DASHBOARD_PORT=9000
      - MONITORING_API_PORT=9001
      - PRIVACY_LEVEL=high
      - ENABLE_CHAT_MONITORING=false
    ports:
      - "9000:9000"  # Monitoring Dashboard
      - "9001:9001"  # Monitoring API
    restart: unless-stopped
    networks:
      - n8n-network
    volumes:
      - ./logs:/app/logs

networks:
  n8n-network:
    name: docker-compose_n8n-network
    external: true